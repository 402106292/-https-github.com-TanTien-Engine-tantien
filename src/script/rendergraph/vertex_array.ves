import "render" for VertexArray as r_VertexArray
import "blueprint.node" for Node
import "blueprint.pin" for Pin

class VertexArray is Node
{
	init() 
	{
		super.init(VertexArray.name)

		this.exports = [
			Pin(this, "out", "va")
		]
		this.layout()

		this.data = nil
		this.attrs = nil

		this.va = nil
		this.dirty = true
	}

	execute() {
		if (this.data and this.attrs and this.dirty) {
			this.va = r_VertexArray.init(this.data, this.attrs)
			this.dirty = false
		}
	}

	toString(name) {
		return "
%(name).data = %(this.data)
%(name).attrs = %(this.attrs)
"
	}
}